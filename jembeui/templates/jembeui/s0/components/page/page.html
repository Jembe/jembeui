{# does not extend page_base in order to:
    - keep block naming consistent
    - be able to fully integrate _notifications, _update_indicator etc components in 
      new page layout
 #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{component("_title")}}
    {# seo tag + description #}
    <link rel="stylesheet" href="{{url_for('jembeui.static', filename='jembeui/s0/css/main.css')}}">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/fira.css">
</head>
<body>
    <div class="page-layout">
        <div class="page-layout__top">
            {{component("_update_indicator")}}
        </div>
        <div class="page-layout__header">
            <div class="page-layout__header__title">
                <button class="button button--ghost page-layout__header__title__toggle-menu page-layout__header__title__toggle-menu--closed" type="button" 
                        jmb-ref="menuButton"
                        jmb-on:click="$dispatch('juiToggleMainMenu')"
                        jmb-on:jui-toggle-main-menu.camel.window="$self.classList.toggle('page-layout__header__title__toggle-menu--closed')">

                        <!-- This Source Code Form is subject to the terms of the Mozilla Public
                        - License, v. 2.0. If a copy of the MPL was not distributed with this
                        - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
                        <svg jmb-on:jui-toggle-main-menu.camel.window="$self.classList.toggle('hide')" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="context-fill" d="M3 4h10a1 1 0 0 0 0-2H3a1 1 0 0 0 0 2zm10 3H3a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2zm0 5H3a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2z"></path></svg>

                        <!-- This Source Code Form is subject to the terms of the Mozilla Public
                        - License, v. 2.0. If a copy of the MPL was not distributed with this
                        - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
                        <svg class="hide" jmb-on:jui-toggle-main-menu.camel.window="$self.classList.toggle('hide')"  xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="context-fill" d="M9.061 8l3.47-3.47a.75.75 0 0 0-1.061-1.06L8 6.939 4.53 3.47a.75.75 0 1 0-1.06 1.06L6.939 8 3.47 11.47a.75.75 0 1 0 1.06 1.06L8 9.061l3.47 3.47a.75.75 0 0 0 1.06-1.061z"></path></svg>
                </button>
                <a href="{{url_for('index')}}">{{title}}</a></div>
            <div class="page-layout__header__menu">
                {{component("_system_menu")}}
            </div>
        </div>
        <div class="page-layout__main">
            <div class="page-layout__main__menu page-layout__main__menu--hide" 
                jmb-cloak jmb-on:jui-toggle-main-menu.camel.window="$self.classList.toggle('page-layout__main__menu--hide')"
                jmb-on:click.away="if (!$self.classList.contains('page-layout__main__menu--hide') && $event.target.closest('button') !== $refs.menuButton){$dispatch('juiToggleMainMenu')}">
                {{component("_main_menu")}}
            </div>
            <div class="page-layout__main__content">
                <div class="page-layout__main__content__top-bar">
                    {{component("_breadcrumb")}}
                    {{component("_notifications")}}
                </div>
                {% block page_content %}{% endblock page_content %}
            </div>
        </div>
    </div>

    {{component("_syserror")}}
    {{component("_action_confirmation")}}
    <script src="{{ url_for('jembe.static', filename='js/jembe.js') }}" defer></script>
    <script defer>
    window.addEventListener('DOMContentLoaded', function(event){
        window.jembeClient.addXRequestHeaderGenerator(function () {
            return {'X-CSRFToken': window.jembeClient.getCookie("_csrf_token")};
        })
    })
    </script> 
</body>
</html>